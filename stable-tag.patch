diff --git a/codex-rs/Cargo.lock b/codex-rs/Cargo.lock
index 189d9468d..f62ca5341 100644
--- a/codex-rs/Cargo.lock
+++ b/codex-rs/Cargo.lock
@@ -380,7 +380,7 @@ checksum = "5f0e0fee31ef5ed1ba1316088939cea399010ed7731dba877ed44aeb407a75ea"
 
 [[package]]
 name = "app_test_support"
-version = "0.0.0"
+version = "0.104.0"
 dependencies = [
  "anyhow",
  "base64 0.22.1",
@@ -1301,7 +1301,7 @@ checksum = "e9b18233253483ce2f65329a24072ec414db782531bdbb7d0bbc4bd2ce6b7e21"
 
 [[package]]
 name = "codex-ansi-escape"
-version = "0.0.0"
+version = "0.104.0"
 dependencies = [
  "ansi-to-tui",
  "ratatui",
@@ -1310,7 +1310,7 @@ dependencies = [
 
 [[package]]
 name = "codex-api"
-version = "0.0.0"
+version = "0.104.0"
 dependencies = [
  "anyhow",
  "assert_matches",
@@ -1340,7 +1340,7 @@ dependencies = [
 
 [[package]]
 name = "codex-app-server"
-version = "0.0.0"
+version = "0.104.0"
 dependencies = [
  "anyhow",
  "app_test_support",
@@ -1388,7 +1388,7 @@ dependencies = [
 
 [[package]]
 name = "codex-app-server-protocol"
-version = "0.0.0"
+version = "0.104.0"
 dependencies = [
  "anyhow",
  "clap",
@@ -1412,7 +1412,7 @@ dependencies = [
 
 [[package]]
 name = "codex-app-server-test-client"
-version = "0.0.0"
+version = "0.104.0"
 dependencies = [
  "anyhow",
  "clap",
@@ -1427,7 +1427,7 @@ dependencies = [
 
 [[package]]
 name = "codex-apply-patch"
-version = "0.0.0"
+version = "0.104.0"
 dependencies = [
  "anyhow",
  "assert_cmd",
@@ -1443,7 +1443,7 @@ dependencies = [
 
 [[package]]
 name = "codex-arg0"
-version = "0.0.0"
+version = "0.104.0"
 dependencies = [
  "anyhow",
  "codex-apply-patch",
@@ -1456,7 +1456,7 @@ dependencies = [
 
 [[package]]
 name = "codex-async-utils"
-version = "0.0.0"
+version = "0.104.0"
 dependencies = [
  "async-trait",
  "pretty_assertions",
@@ -1466,7 +1466,7 @@ dependencies = [
 
 [[package]]
 name = "codex-backend-client"
-version = "0.0.0"
+version = "0.104.0"
 dependencies = [
  "anyhow",
  "codex-backend-openapi-models",
@@ -1480,7 +1480,7 @@ dependencies = [
 
 [[package]]
 name = "codex-backend-openapi-models"
-version = "0.0.0"
+version = "0.104.0"
 dependencies = [
  "serde",
  "serde_json",
@@ -1489,7 +1489,7 @@ dependencies = [
 
 [[package]]
 name = "codex-chatgpt"
-version = "0.0.0"
+version = "0.104.0"
 dependencies = [
  "anyhow",
  "clap",
@@ -1507,7 +1507,7 @@ dependencies = [
 
 [[package]]
 name = "codex-cli"
-version = "0.0.0"
+version = "0.104.0"
 dependencies = [
  "anyhow",
  "assert_cmd",
@@ -1548,7 +1548,7 @@ dependencies = [
 
 [[package]]
 name = "codex-client"
-version = "0.0.0"
+version = "0.104.0"
 dependencies = [
  "async-trait",
  "bytes",
@@ -1571,7 +1571,7 @@ dependencies = [
 
 [[package]]
 name = "codex-cloud-requirements"
-version = "0.0.0"
+version = "0.104.0"
 dependencies = [
  "async-trait",
  "base64 0.22.1",
@@ -1594,7 +1594,7 @@ dependencies = [
 
 [[package]]
 name = "codex-cloud-tasks"
-version = "0.0.0"
+version = "0.104.0"
 dependencies = [
  "anyhow",
  "async-trait",
@@ -1623,7 +1623,7 @@ dependencies = [
 
 [[package]]
 name = "codex-cloud-tasks-client"
-version = "0.0.0"
+version = "0.104.0"
 dependencies = [
  "anyhow",
  "async-trait",
@@ -1638,7 +1638,7 @@ dependencies = [
 
 [[package]]
 name = "codex-config"
-version = "0.0.0"
+version = "0.104.0"
 dependencies = [
  "anyhow",
  "codex-app-server-protocol",
@@ -1658,7 +1658,7 @@ dependencies = [
 
 [[package]]
 name = "codex-core"
-version = "0.0.0"
+version = "0.104.0"
 dependencies = [
  "anyhow",
  "arc-swap",
@@ -1765,7 +1765,7 @@ dependencies = [
 
 [[package]]
 name = "codex-debug-client"
-version = "0.0.0"
+version = "0.104.0"
 dependencies = [
  "anyhow",
  "clap",
@@ -1777,7 +1777,7 @@ dependencies = [
 
 [[package]]
 name = "codex-exec"
-version = "0.0.0"
+version = "0.104.0"
 dependencies = [
  "anyhow",
  "assert_cmd",
@@ -1814,7 +1814,7 @@ dependencies = [
 
 [[package]]
 name = "codex-exec-server"
-version = "0.0.0"
+version = "0.104.0"
 dependencies = [
  "anyhow",
  "async-trait",
@@ -1841,7 +1841,7 @@ dependencies = [
 
 [[package]]
 name = "codex-execpolicy"
-version = "0.0.0"
+version = "0.104.0"
 dependencies = [
  "anyhow",
  "clap",
@@ -1857,7 +1857,7 @@ dependencies = [
 
 [[package]]
 name = "codex-execpolicy-legacy"
-version = "0.0.0"
+version = "0.104.0"
 dependencies = [
  "allocative",
  "anyhow",
@@ -1877,7 +1877,7 @@ dependencies = [
 
 [[package]]
 name = "codex-experimental-api-macros"
-version = "0.0.0"
+version = "0.104.0"
 dependencies = [
  "proc-macro2",
  "quote",
@@ -1886,7 +1886,7 @@ dependencies = [
 
 [[package]]
 name = "codex-feedback"
-version = "0.0.0"
+version = "0.104.0"
 dependencies = [
  "anyhow",
  "codex-protocol",
@@ -1898,7 +1898,7 @@ dependencies = [
 
 [[package]]
 name = "codex-file-search"
-version = "0.0.0"
+version = "0.104.0"
 dependencies = [
  "anyhow",
  "clap",
@@ -1914,7 +1914,7 @@ dependencies = [
 
 [[package]]
 name = "codex-git"
-version = "0.0.0"
+version = "0.104.0"
 dependencies = [
  "assert_matches",
  "once_cell",
@@ -1930,7 +1930,7 @@ dependencies = [
 
 [[package]]
 name = "codex-hooks"
-version = "0.0.0"
+version = "0.104.0"
 dependencies = [
  "anyhow",
  "chrono",
@@ -1945,7 +1945,7 @@ dependencies = [
 
 [[package]]
 name = "codex-keyring-store"
-version = "0.0.0"
+version = "0.104.0"
 dependencies = [
  "keyring",
  "tracing",
@@ -1953,7 +1953,7 @@ dependencies = [
 
 [[package]]
 name = "codex-linux-sandbox"
-version = "0.0.0"
+version = "0.104.0"
 dependencies = [
  "cc",
  "clap",
@@ -1971,7 +1971,7 @@ dependencies = [
 
 [[package]]
 name = "codex-lmstudio"
-version = "0.0.0"
+version = "0.104.0"
 dependencies = [
  "codex-core",
  "reqwest",
@@ -1984,7 +1984,7 @@ dependencies = [
 
 [[package]]
 name = "codex-login"
-version = "0.0.0"
+version = "0.104.0"
 dependencies = [
  "anyhow",
  "base64 0.22.1",
@@ -2008,7 +2008,7 @@ dependencies = [
 
 [[package]]
 name = "codex-mcp-server"
-version = "0.0.0"
+version = "0.104.0"
 dependencies = [
  "anyhow",
  "codex-arg0",
@@ -2034,7 +2034,7 @@ dependencies = [
 
 [[package]]
 name = "codex-network-proxy"
-version = "0.0.0"
+version = "0.104.0"
 dependencies = [
  "anyhow",
  "async-trait",
@@ -2064,7 +2064,7 @@ dependencies = [
 
 [[package]]
 name = "codex-ollama"
-version = "0.0.0"
+version = "0.104.0"
 dependencies = [
  "assert_matches",
  "async-stream",
@@ -2082,7 +2082,7 @@ dependencies = [
 
 [[package]]
 name = "codex-otel"
-version = "0.0.0"
+version = "0.104.0"
 dependencies = [
  "chrono",
  "codex-api",
@@ -2112,7 +2112,7 @@ dependencies = [
 
 [[package]]
 name = "codex-process-hardening"
-version = "0.0.0"
+version = "0.104.0"
 dependencies = [
  "libc",
  "pretty_assertions",
@@ -2120,7 +2120,7 @@ dependencies = [
 
 [[package]]
 name = "codex-protocol"
-version = "0.0.0"
+version = "0.104.0"
 dependencies = [
  "anyhow",
  "codex-execpolicy",
@@ -2147,7 +2147,7 @@ dependencies = [
 
 [[package]]
 name = "codex-responses-api-proxy"
-version = "0.0.0"
+version = "0.104.0"
 dependencies = [
  "anyhow",
  "clap",
@@ -2163,7 +2163,7 @@ dependencies = [
 
 [[package]]
 name = "codex-rmcp-client"
-version = "0.0.0"
+version = "0.104.0"
 dependencies = [
  "anyhow",
  "axum",
@@ -2194,7 +2194,7 @@ dependencies = [
 
 [[package]]
 name = "codex-secrets"
-version = "0.0.0"
+version = "0.104.0"
 dependencies = [
  "age",
  "anyhow",
@@ -2213,7 +2213,7 @@ dependencies = [
 
 [[package]]
 name = "codex-shell-command"
-version = "0.0.0"
+version = "0.104.0"
 dependencies = [
  "anyhow",
  "base64 0.22.1",
@@ -2233,7 +2233,7 @@ dependencies = [
 
 [[package]]
 name = "codex-state"
-version = "0.0.0"
+version = "0.104.0"
 dependencies = [
  "anyhow",
  "chrono",
@@ -2255,7 +2255,7 @@ dependencies = [
 
 [[package]]
 name = "codex-stdio-to-uds"
-version = "0.0.0"
+version = "0.104.0"
 dependencies = [
  "anyhow",
  "assert_cmd",
@@ -2267,7 +2267,7 @@ dependencies = [
 
 [[package]]
 name = "codex-tui"
-version = "0.0.0"
+version = "0.104.0"
 dependencies = [
  "anyhow",
  "arboard",
@@ -2352,7 +2352,7 @@ dependencies = [
 
 [[package]]
 name = "codex-utils-absolute-path"
-version = "0.0.0"
+version = "0.104.0"
 dependencies = [
  "dirs",
  "path-absolutize",
@@ -2366,14 +2366,14 @@ dependencies = [
 
 [[package]]
 name = "codex-utils-approval-presets"
-version = "0.0.0"
+version = "0.104.0"
 dependencies = [
  "codex-core",
 ]
 
 [[package]]
 name = "codex-utils-cache"
-version = "0.0.0"
+version = "0.104.0"
 dependencies = [
  "lru 0.16.3",
  "sha1",
@@ -2382,7 +2382,7 @@ dependencies = [
 
 [[package]]
 name = "codex-utils-cargo-bin"
-version = "0.0.0"
+version = "0.104.0"
 dependencies = [
  "assert_cmd",
  "runfiles",
@@ -2391,7 +2391,7 @@ dependencies = [
 
 [[package]]
 name = "codex-utils-cli"
-version = "0.0.0"
+version = "0.104.0"
 dependencies = [
  "clap",
  "codex-core",
@@ -2403,15 +2403,15 @@ dependencies = [
 
 [[package]]
 name = "codex-utils-elapsed"
-version = "0.0.0"
+version = "0.104.0"
 
 [[package]]
 name = "codex-utils-fuzzy-match"
-version = "0.0.0"
+version = "0.104.0"
 
 [[package]]
 name = "codex-utils-home-dir"
-version = "0.0.0"
+version = "0.104.0"
 dependencies = [
  "dirs",
  "pretty_assertions",
@@ -2420,7 +2420,7 @@ dependencies = [
 
 [[package]]
 name = "codex-utils-image"
-version = "0.0.0"
+version = "0.104.0"
 dependencies = [
  "base64 0.22.1",
  "codex-utils-cache",
@@ -2432,7 +2432,7 @@ dependencies = [
 
 [[package]]
 name = "codex-utils-json-to-toml"
-version = "0.0.0"
+version = "0.104.0"
 dependencies = [
  "pretty_assertions",
  "serde_json",
@@ -2441,7 +2441,7 @@ dependencies = [
 
 [[package]]
 name = "codex-utils-oss"
-version = "0.0.0"
+version = "0.104.0"
 dependencies = [
  "codex-core",
  "codex-lmstudio",
@@ -2450,7 +2450,7 @@ dependencies = [
 
 [[package]]
 name = "codex-utils-pty"
-version = "0.0.0"
+version = "0.104.0"
 dependencies = [
  "anyhow",
  "filedescriptor",
@@ -2466,7 +2466,7 @@ dependencies = [
 
 [[package]]
 name = "codex-utils-readiness"
-version = "0.0.0"
+version = "0.104.0"
 dependencies = [
  "assert_matches",
  "async-trait",
@@ -2477,14 +2477,14 @@ dependencies = [
 
 [[package]]
 name = "codex-utils-rustls-provider"
-version = "0.0.0"
+version = "0.104.0"
 dependencies = [
  "rustls",
 ]
 
 [[package]]
 name = "codex-utils-sandbox-summary"
-version = "0.0.0"
+version = "0.104.0"
 dependencies = [
  "codex-core",
  "codex-utils-absolute-path",
@@ -2493,14 +2493,14 @@ dependencies = [
 
 [[package]]
 name = "codex-utils-sanitizer"
-version = "0.0.0"
+version = "0.104.0"
 dependencies = [
  "regex",
 ]
 
 [[package]]
 name = "codex-utils-sleep-inhibitor"
-version = "0.0.0"
+version = "0.104.0"
 dependencies = [
  "core-foundation 0.9.4",
  "libc",
@@ -2509,14 +2509,14 @@ dependencies = [
 
 [[package]]
 name = "codex-utils-string"
-version = "0.0.0"
+version = "0.104.0"
 dependencies = [
  "pretty_assertions",
 ]
 
 [[package]]
 name = "codex-windows-sandbox"
-version = "0.0.0"
+version = "0.104.0"
 dependencies = [
  "anyhow",
  "base64 0.22.1",
@@ -2719,7 +2719,7 @@ checksum = "773648b94d0e5d620f64f280777445740e61fe701025087ec8b57f45c791888b"
 
 [[package]]
 name = "core_test_support"
-version = "0.0.0"
+version = "0.104.0"
 dependencies = [
  "anyhow",
  "assert_cmd",
@@ -3592,7 +3592,7 @@ dependencies = [
 
 [[package]]
 name = "exec_server_test_support"
-version = "0.0.0"
+version = "0.104.0"
 dependencies = [
  "anyhow",
  "codex-core",
@@ -5369,7 +5369,7 @@ checksum = "b3eede3bdf92f3b4f9dc04072a9ce5ab557d5ec9038773bf9ffcd5588b3cc05b"
 
 [[package]]
 name = "mcp_test_support"
-version = "0.0.0"
+version = "0.104.0"
 dependencies = [
  "anyhow",
  "codex-core",
diff --git a/codex-rs/cli/Cargo.toml b/codex-rs/cli/Cargo.toml
index fd15f8791..b0532edcf 100644
--- a/codex-rs/cli/Cargo.toml
+++ b/codex-rs/cli/Cargo.toml
@@ -8,6 +8,10 @@ license.workspace = true
 name = "codex"
 path = "src/main.rs"
 
+[[bin]]
+name = "codex-litellm"
+path = "src/main.rs"
+
 [lib]
 name = "codex_cli"
 path = "src/lib.rs"
diff --git a/codex-rs/core/src/codex.rs b/codex-rs/core/src/codex.rs
index 7744480ab..8cf581ff9 100644
--- a/codex-rs/core/src/codex.rs
+++ b/codex-rs/core/src/codex.rs
@@ -4249,7 +4249,11 @@ pub(crate) async fn run_turn(
     }
 
     let model_info = turn_context.model_info.clone();
-    let auto_compact_limit = model_info.auto_compact_token_limit().unwrap_or(i64::MAX);
+    let auto_compact_limit = if should_disable_auto_compaction(&turn_context.provider) {
+        i64::MAX
+    } else {
+        model_info.auto_compact_token_limit().unwrap_or(i64::MAX)
+    };
 
     let event = EventMsg::TurnStarted(TurnStartedEvent {
         turn_id: turn_context.sub_id.clone(),
@@ -4585,6 +4589,9 @@ async fn run_pre_sampling_compact(
     sess: &Arc<Session>,
     turn_context: &Arc<TurnContext>,
 ) -> CodexResult<()> {
+    if should_disable_auto_compaction(&turn_context.provider) {
+        return Ok(());
+    }
     let total_usage_tokens_before_compaction = sess.get_total_token_usage().await;
     maybe_run_previous_model_inline_compact(
         sess,
@@ -4630,10 +4637,14 @@ async fn maybe_run_previous_model_inline_compact(
     let Some(new_context_window) = turn_context.model_context_window() else {
         return Ok(());
     };
-    let new_auto_compact_limit = turn_context
-        .model_info
-        .auto_compact_token_limit()
-        .unwrap_or(i64::MAX);
+    let new_auto_compact_limit = if should_disable_auto_compaction(&turn_context.provider) {
+        i64::MAX
+    } else {
+        turn_context
+            .model_info
+            .auto_compact_token_limit()
+            .unwrap_or(i64::MAX)
+    };
     let should_run = total_usage_tokens > new_auto_compact_limit
         && previous_turn_context.model_info.slug != turn_context.model_info.slug
         && old_context_window > new_context_window;
@@ -4652,6 +4663,10 @@ async fn run_auto_compact(sess: &Arc<Session>, turn_context: &Arc<TurnContext>)
     Ok(())
 }
 
+fn should_disable_auto_compaction(provider: &ModelProviderInfo) -> bool {
+    !provider.is_openai()
+}
+
 fn collect_explicit_app_ids_from_skill_items(
     skill_items: &[ResponseItem],
     connectors: &[connectors::AppInfo],
diff --git a/codex-rs/core/src/model_provider_info.rs b/codex-rs/core/src/model_provider_info.rs
index 5d5ee3669..2c371a5ae 100644
--- a/codex-rs/core/src/model_provider_info.rs
+++ b/codex-rs/core/src/model_provider_info.rs
@@ -266,6 +266,7 @@ pub const DEFAULT_OLLAMA_PORT: u16 = 11434;
 
 pub const LMSTUDIO_OSS_PROVIDER_ID: &str = "lmstudio";
 pub const OLLAMA_OSS_PROVIDER_ID: &str = "ollama";
+pub const LITELLM_PROVIDER_ID: &str = "litellm";
 
 /// Built-in default provider list.
 pub fn built_in_model_providers() -> HashMap<String, ModelProviderInfo> {
@@ -277,6 +278,7 @@ pub fn built_in_model_providers() -> HashMap<String, ModelProviderInfo> {
     // `model_providers` in config.toml to add their own providers.
     [
         ("openai", P::create_openai_provider()),
+        (LITELLM_PROVIDER_ID, create_litellm_provider()),
         (
             OLLAMA_OSS_PROVIDER_ID,
             create_oss_provider(DEFAULT_OLLAMA_PORT, WireApi::Responses),
@@ -291,6 +293,32 @@ pub fn built_in_model_providers() -> HashMap<String, ModelProviderInfo> {
     .collect()
 }
 
+fn create_litellm_provider() -> ModelProviderInfo {
+    let base_url = std::env::var("LITELLM_BASE_URL")
+        .ok()
+        .filter(|v| !v.trim().is_empty())
+        .unwrap_or_else(|| "https://llm.gour.top/v1".to_string());
+
+    ModelProviderInfo {
+        name: "LiteLLM".into(),
+        base_url: Some(base_url),
+        env_key: Some("LITELLM_API_KEY".into()),
+        env_key_instructions: Some(
+            "Set LITELLM_API_KEY to your LiteLLM gateway key.".to_string(),
+        ),
+        experimental_bearer_token: None,
+        wire_api: WireApi::Responses,
+        query_params: None,
+        http_headers: None,
+        env_http_headers: None,
+        request_max_retries: None,
+        stream_max_retries: None,
+        stream_idle_timeout_ms: None,
+        requires_openai_auth: false,
+        supports_websockets: false,
+    }
+}
+
 pub fn create_oss_provider(default_provider_port: u16, wire_api: WireApi) -> ModelProviderInfo {
     // These CODEX_OSS_ environment variables are experimental: we may
     // switch to reading values from config.toml instead.
diff --git a/codex-rs/core/src/models_manager/manager.rs b/codex-rs/core/src/models_manager/manager.rs
index 457351995..28bd48b16 100644
--- a/codex-rs/core/src/models_manager/manager.rs
+++ b/codex-rs/core/src/models_manager/manager.rs
@@ -11,6 +11,8 @@ use crate::model_provider_info::ModelProviderInfo;
 use crate::models_manager::collaboration_mode_presets::builtin_collaboration_mode_presets;
 use crate::models_manager::model_info;
 use crate::models_manager::model_presets::builtin_model_presets;
+use crate::models_manager::supported_models::filter_supported_agentic_models;
+use crate::models_manager::supported_models::supported_agentic_models;
 use codex_api::ModelsClient;
 use codex_api::ReqwestTransport;
 use codex_protocol::config_types::CollaborationModeMask;
@@ -26,6 +28,7 @@ use tokio::sync::TryLockError;
 use tokio::time::timeout;
 use tracing::error;
 use tracing::info;
+use tracing::warn;
 
 const MODEL_CACHE_FILE: &str = "models_cache.json";
 const DEFAULT_MODEL_CACHE_TTL: Duration = Duration::from_secs(300);
@@ -292,6 +295,15 @@ impl ModelsManager {
         let mut merged_presets = ModelPreset::merge(remote_presets, existing_presets);
         let chatgpt_mode = matches!(self.auth_manager.auth_mode(), Some(AuthMode::Chatgpt));
         merged_presets = ModelPreset::filter_by_auth(merged_presets, chatgpt_mode);
+        let filtered_presets = filter_supported_agentic_models(merged_presets.clone());
+        if filtered_presets.is_empty() {
+            warn!(
+                supported_models = ?supported_agentic_models(),
+                "agentic model allowlist produced no models; falling back to upstream model set"
+            );
+        } else {
+            merged_presets = filtered_presets;
+        }
 
         for preset in &mut merged_presets {
             preset.is_default = false;
diff --git a/codex-rs/core/src/models_manager/mod.rs b/codex-rs/core/src/models_manager/mod.rs
index 53b33bc4e..291d08baf 100644
--- a/codex-rs/core/src/models_manager/mod.rs
+++ b/codex-rs/core/src/models_manager/mod.rs
@@ -3,6 +3,7 @@ pub mod collaboration_mode_presets;
 pub mod manager;
 pub mod model_info;
 pub mod model_presets;
+pub mod supported_models;
 
 /// Convert the client version string to a whole version string (e.g. "1.2.3-alpha.4" -> "1.2.3").
 pub fn client_version_to_whole() -> String {
diff --git a/codex-rs/core/src/models_manager/supported_models.rs b/codex-rs/core/src/models_manager/supported_models.rs
new file mode 100644
index 000000000..18495634d
--- /dev/null
+++ b/codex-rs/core/src/models_manager/supported_models.rs
@@ -0,0 +1,53 @@
+use codex_protocol::openai_models::ModelPreset;
+
+const AGENTIC_SUPPORTED_MODELS: &[&str] = &[
+    "gpt-5.2-codex",
+    "gpt-5.1-codex-max",
+    "gpt-5.1-codex-mini",
+    "gpt-5.2",
+    "gpt-5.1",
+    "gpt-5",
+    "o3",
+    "o3-pro",
+    "o4-mini",
+    "claude-sonnet-4-6",
+    "claude-4-5-sonnet",
+    "gemini-3-pro",
+    "grok-4-1-fast-reasoning",
+    "deepseek-v3-2-reasoning",
+    "minimax-m2-5",
+    "minimax-m2",
+    "kimi-k2-5",
+    "kimi-k2.5",
+    "qwen3-5-397b-a17b",
+    "glm-5",
+];
+
+pub(crate) fn is_supported_agentic_model(model: &str) -> bool {
+    AGENTIC_SUPPORTED_MODELS.iter().any(|candidate| {
+        model == *candidate
+            || model
+                .strip_prefix(candidate)
+                .is_some_and(|suffix| suffix.starts_with(':'))
+            || model
+                .rsplit('/')
+                .next()
+                .is_some_and(|suffix| suffix == *candidate)
+            || model
+                .rsplit('/')
+                .next()
+                .and_then(|suffix| suffix.strip_prefix(candidate))
+                .is_some_and(|suffix| suffix.starts_with(':'))
+    })
+}
+
+pub(crate) fn filter_supported_agentic_models(models: Vec<ModelPreset>) -> Vec<ModelPreset> {
+    models
+        .into_iter()
+        .filter(|preset| is_supported_agentic_model(&preset.model))
+        .collect()
+}
+
+pub(crate) fn supported_agentic_models() -> &'static [&'static str] {
+    AGENTIC_SUPPORTED_MODELS
+}
